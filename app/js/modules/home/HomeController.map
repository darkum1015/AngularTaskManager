{"version":3,"sources":["HomeController.js"],"names":[],"mappings":"AAAA;AAAA,AAAC,SAAU,AAAD,CAAG;AACT,AAAI,IAAA,CAAA,SAAQ,EAAI,CAAA,OAAM,OAAO,AAAC,CAAC,YAAW,CAAC,CAAC;AAE5C,UAAQ,WAAW,AAAC,CAAC,gBAAe,CAAE,eAAa,CAAC,CAAC;AACrD,eAAa,QAAQ,EAAG,EAAC,OAAM,CAAE,iBAAe,CAAC,CAAC;AAElD,SAAS,eAAa,CAAE,KAAI,CAAE,CAAA,cAAa,CAAG;AAC1C,AAAI,MAAA,CAAA,EAAC,EAAI,KAAG,CAAC;AACb,KAAC,SAAS,EAAI,GAAC,CAAC;AAChB,KAAC,WAAW,EAAI,WAAS,CAAC;AAC1B,KAAC,SAAS,EAAI,SAAO,CAAC;AACtB,KAAC,eAAe,EAAI,eAAa,CAAC;AAGlC,cAAU,AAAC,EAAC,CAAC;AAEb,WAAS,YAAU,CAAE,AAAD,CAAE;AAGlB,UAAI,AAAC,CAAC;AACH,YAAI,CAAG,kCAAgC;AACtC,eAAO,CAAG,MAAI;AAAA,MAElB,CAAC,KAAK,AAAC,CAAC,QAAS,QAAM,CAAE,QAAO,CAAE;AAC9B,SAAC,SAAS,EAAI,CAAA,QAAO,KAAK,KAAK,CAAC;MAEpC,CAAE,SAAS,QAAM,CAAE,KAAI,CAAE,GAEzB,CAAC,CAAC;IACN;AAAA,AAEA,WAAS,eAAa,CAAE,AAAD,CAAG;AACtB,SAAG,cAAa,aAAa,AAAC,EAAC,CAAE;AAC7B,qBAAa,WAAW,AAAC,CAAC,cAAa,CAAC,CAAC;MAC7C,KAAK;AACD,qBAAa,WAAW,AAAC,CAAC,QAAO,CAAC,CAAC;MACvC;AAAA,IAEJ;AAAA,AAEA,WAAS,SAAO,CAAE,MAAK,CAAE;AACrB,SAAG,cAAa,aAAa,AAAC,EAAC,CAAE;AAC9B,qBAAa,WAAW,AAAC,CAAC,aAAY,EAAE,OAAK,CAAC,CAAC;MAClD,KAAK;AACD,qBAAa,WAAW,AAAC,CAAC,QAAO,CAAC,CAAC;MACvC;AAAA,IACJ;AAAA,AAEA,WAAS,WAAS,CAAE,MAAK,CAAG;AAExB,SAAG,cAAa,aAAa,AAAC,EAAC,CAAE;AAC7B,AAAI,UAAA,CAAA,MAAK,EAAG,OAAK,CAAC;AAClB,YAAI,AAAC,CAAC;AACF,YAAE,CAAG,CAAA,kCAAiC,EAAE,OAAK;AAC7C,eAAK,CAAE,SAAO;AAAA,QAElB,CAAC,KAAK,AAAC,CAAC,QAAS,QAAM,CAAE,QAAO,CAAE;AAE9B,wBAAc,AAAC,CAAC,MAAK,CAAC,CAAC;QAC3B,CAAE,SAAS,QAAM,CAAE,KAAI,CAAG;AACtB,cAAI,AAAC,CAAC,QAAO,CAAC,CAAC;QACnB,CAAC,CAAC;MACN,KAAK;AACD,qBAAa,WAAW,AAAC,CAAC,QAAO,CAAC,CAAC;MACvC;AAAA,IAEJ;AAAA,AAEA,WAAS,gBAAc,CAAE,MAAK,CAAE;AAC5B,UAAQ,GAAA,CAAA,IAAG,CAAA,EAAK,CAAA,EAAC,SAAS,CAAE;AACxB,WAAG,EAAC,SAAS,CAAE,IAAG,CAAC,IAAI,GAAK,OAAK,CAAE;AAC/B,WAAC,SAAS,OAAO,AAAC,CAAC,IAAG,CAAE,EAAA,CAAC,CAAC;QAC9B;AAAA,MACJ;AAAA,IACJ;AAAA,EACJ;AAAA,AAEJ,CAAC,AAAC,EAAC,CAAC;AACJ","file":"app/js/modules/home/HomeController.js","sourcesContent":["(function () {\r\n    var appModule = angular.module('app.module');\r\n\r\n    appModule.controller('HomeController',HomeController);\r\n    HomeController.$inject =['$http','UtilityService'];\r\n\r\n    function HomeController($http,UtilityService) {\r\n        var vm = this;\r\n        vm.taskList = [];\r\n        vm.deleteTask = deleteTask;\r\n        vm.editTask = editTask;\r\n        vm.showCreateTask = showCreateTask;\r\n\r\n        //not hosisted as not needed to be exposed to template\r\n        getAllTasks();\r\n\r\n        function getAllTasks(){\r\n\r\n\r\n            $http({\r\n               \"url\": \"http://localhost:8300/api/tasks\",\r\n                \"method\": 'GET'\r\n\r\n            }).then(function success(response){\r\n                vm.taskList = response.data.rows;\r\n\r\n            },function failure(error){\r\n\r\n            });\r\n        }\r\n\r\n        function showCreateTask() {\r\n            if(UtilityService.isAuthorized()){\r\n                UtilityService.navigateTo('/create/task');\r\n            }else{\r\n                UtilityService.navigateTo('/login');\r\n            }\r\n\r\n        }\r\n\r\n        function editTask(taskId){\r\n            if(UtilityService.isAuthorized()){\r\n               UtilityService.navigateTo('/edit/task/'+taskId);\r\n            }else{\r\n                UtilityService.navigateTo('/login');\r\n            }\r\n        }\r\n\r\n        function deleteTask(taskId) {\r\n\r\n            if(UtilityService.isAuthorized()){\r\n                var taskId= taskId;\r\n                $http({\r\n                    url: \"http://localhost:8300/api/tasks/\"+taskId,\r\n                    method:\"DELETE\"\r\n\r\n                }).then(function success(response){\r\n\r\n                    removeTableRows(taskId);\r\n                },function failure(error) {\r\n                    alert(\"failed\");\r\n                });\r\n            }else{\r\n                UtilityService.navigateTo('/login');\r\n            }\r\n\r\n        }\r\n\r\n        function removeTableRows(itemId){\r\n            for(var item in vm.taskList){\r\n                if(vm.taskList[item]._id == itemId){\r\n                    vm.taskList.splice(item,1);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n})();\r\n"]}