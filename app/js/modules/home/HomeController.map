{"version":3,"sources":["HomeController.js"],"names":[],"mappings":"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","file":"app/js/modules/home/HomeController.js","sourcesContent":["(function () {\r\n    var appModule = angular.module('app.module');\r\n\r\n    appModule.controller('HomeController',HomeController);\r\n    HomeController.$inject =['$http','UtilityService'];\r\n\r\n    function HomeController($http,UtilityService) {\r\n        var vm = this;\r\n        vm.taskList = [];\r\n        vm.userList =[];\r\n        vm.deleteTask = deleteTask;\r\n        vm.editTask = editTask;\r\n        vm.showCreateTask = showCreateTask;\r\n\r\n        UtilityService.getAllUsers().then(function success(userList){\r\n            vm.userList = userList;\r\n        },function failure(error) {\r\n            alert(\"error\");\r\n        });\r\n        //not hosisted as not needed to be exposed to template\r\n        getAllTasks();\r\n\r\n        function getAllTasks(){\r\n\r\n\r\n            $http({\r\n               \"url\": \"http://localhost:8300/api/tasks\",\r\n                \"method\": 'GET'\r\n\r\n            }).then(function success(response){\r\n                /*vm.taskList = response.data.rows;*/\r\n                vm.taskList = normaliseTaskList(response.data.rows);\r\n            },function failure(error){\r\n                alert(\"error\");\r\n            });\r\n        }\r\n\r\n        function normaliseTaskList(taskList) {\r\n            for(var task in taskList){\r\n                if(taskList[task].assignedTo){\r\n                    taskList[task].resolvedUser = UtilityService.resolveUsernameFromId(taskList[task].assignedTo,vm.userList);\r\n                }\r\n            }\r\n            return taskList;\r\n        }\r\n\r\n        function showCreateTask() {\r\n            if(UtilityService.isAuthorized()){\r\n                UtilityService.navigateTo('/create/task');\r\n            }else{\r\n                UtilityService.navigateTo('/login');\r\n            }\r\n\r\n        }\r\n\r\n        function editTask(taskId){\r\n            if(UtilityService.isAuthorized()){\r\n               UtilityService.navigateTo('/edit/task/'+taskId);\r\n            }else{\r\n                UtilityService.navigateTo('/login');\r\n            }\r\n        }\r\n\r\n        function deleteTask(taskId) {\r\n\r\n            if(UtilityService.isAuthorized()){\r\n                var taskId= taskId;\r\n                $http({\r\n                    url: \"http://localhost:8300/api/tasks/\"+taskId,\r\n                    method:\"DELETE\"\r\n\r\n                }).then(function success(response){\r\n\r\n                    UtilityService.removeTableRows(taskId,vm.taskList);\r\n                },function failure(error) {\r\n                    alert(error.data.message);\r\n                });\r\n            }else{\r\n                UtilityService.navigateTo('/login');\r\n            }\r\n\r\n        }\r\n\r\n\r\n    }\r\n\r\n})();\r\n"]}